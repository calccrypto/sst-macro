<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>SST/macro: Network Topologies and Routing</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customthing.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">SST/macro
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Network Topologies and Routing </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="sec_tutorial_topology"></a>
Network Topologies and Routing</h1>
<p>We here give a brief introduction to specifying different topologies and routing strategies. We will only discuss one basic example (torus). A more thorough introduction covering all topologies is planned for future releases. Excellent resources are "Principles and Practices of Interconnection Networks" by Brian Towles and William Dally published by Morgan Kaufman and "High Performance Datacenter Networks" by Dennis Abts and John Kim published by Morgan and Claypool.</p>
<h2><a class="anchor" id="subsec_tutorial_topology"></a>
Topology</h2>
<p>Topologies are determined by two mandatory parameters. </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;topology_name = torus</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;topology_geometry = 4 4</div></div><!-- fragment --><p> Here we choose a 2D-torus topology with extent 4 in both the X and Y dimensions for a total of 16 nodes (Figure 2) The topology is laid out in a regular grid with network links connecting nearest neighbors. Additionally, wrap-around links connect the nodes on each boundary. <br />
</p>
<div class="image">
<img src="torus.png" alt="torus.png"/>
</div>
<p> <b>Figure 2:</b> 4 x 4 2D Torus</p>
<p><br />
<br />
</p>
<p>The figure is actually an oversimplification. The <code>topology_geometry</code> parameter actually specifies the topology of the <em>network switches</em>, not the compute nodes. A torus is an example of a direct network in which each switch has one or more nodes "directly'' connected to it. A more accurate picture of the network is given in Figure 3. <br />
</p>
<div class="image">
<img src="withnodes.png" alt="withnodes.png"/>
</div>
<p> <b>Figure 3:</b> 4 x 4 2D Torus of Network Switches with Compute Nodes</p>
<p><br />
<br />
 While in many previous architectures there was generally a one-to-one correspondence between compute nodes and switches, more recent architectures have multiple compute nodes per switch (e.g. Cray Gemini with two nodes). Multinode switches can be specified via</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;topology_name = torus</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;topology_geometry = 4 4</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;network_nodes_per_switch = 2</div></div><!-- fragment --><p> which would now generate a torus topology with 16 switches and 32 compute nodes.</p>
<p>Another subtle modification of torus (and other networks) can be controlled by giving the X, Y, and $Z$ directions different bandwidth. The above network could be modified as</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;topology_name = torus</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;topology_geometry = 4 4</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;topology_redundant = 2 1</div></div><!-- fragment --><p> giving the the X-dimension twice the bandwidth of the Y-dimension. This pattern DOES exist in some interconnects as a load-balancing strategy. A very subtle point arises here. Consider two different networks:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;topology_name = torus</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;topology_geometry = 4 4</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;topology_redundant = 1 1</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;network_bandwidth = 2GB/s</div></div><!-- fragment --> <div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;topology_name = torus</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;topology_geometry = 4 4</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;topology_redundant = 2 2</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;network_bandwidth = 1GB/s</div></div><!-- fragment --><p> For some coarse-grained models, these two networks are exactly equivalent. In more fine-grained models, however, these are actually two different networks. The first network has ONE link carrying 2 GB/s. The second network has TWO links each carrying 1 GB/s.</p>
<h2><a class="anchor" id="subsec_tutorial_routing"></a>
Routing</h2>
<p>By default, SST/macro uses the simplest possible routing algorithm: dimension-order minimal routing (Figure 4). <br />
</p>
<div class="image">
<img src="minroutetorus.png" alt="minroutetorus.png"/>
</div>
<p> <b>Figure 4:</b> Dimension-Order Minimal Routing on a 2D Torus</p>
<p><br />
<br />
 In going from source to destination, the message first travels along the X-dimension and then travels along the Y-dimension. The above scheme is entirely static, making no adjustments to avoid congestion in the network. SST/macro supports a variety of adaptive routing algorithms. This can be specified:</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;router = min_ad</div></div><!-- fragment --><p> which specifies minimal adaptive routing. There are now multiple valid paths between network endpoints, one of which is illustrated in Figure 5. <br />
</p>
<div class="image">
<img src="minadroutetorus.png" alt="minadroutetorus.png"/>
</div>
<p> <b>Figure 5:</b> Adaptive Minimal Routing on a 2D Torus</p>
<p><br />
<br />
 At each network hop, the router chooses the <em>productive</em> path with least congestion. In some cases, however, there is only one minimal path (node (0,0) sending to (2,0) with only X different). For these messages, minimal adaptive is exactly equivalent to dimension-order routing. Other supported routing schemes are valiant and UGAL. More routing schemes are scheduled to be added in future versions. A full description of more complicated routing schemes will be given in its own chapter in future versions. For now, we direct users to existing resources such as "High Performance Datacenter Networks'' by Dennis Abts and John Kim. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
